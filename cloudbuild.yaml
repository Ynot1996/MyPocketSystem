steps:
# Step 1: Build Docker image (指定 Dockerfile 路徑)
- name: gcr.io/cloud-builders/docker
  args:
    [
      'build',
      '-t', 'gcr.io/$PROJECT_ID/mypocket-web',
      '-f', 'MyPocket.Web/Dockerfile',
      '.'
    ]
  id: Build

# Step 2: Push image
- name: gcr.io/cloud-builders/docker
  args: ['push', 'gcr.io/$PROJECT_ID/mypocket-web']
  id: Push

# Step 3: Deploy to Cloud Run
- name: gcr.io/google.com/cloudsdk/cloud-sdk
  args:
    [
      'run', 'deploy', 'mypocket-cd',
      '--image', 'gcr.io/$PROJECT_ID/mypocket-web',
      '--region', 'asia-east1',
      '--platform', 'managed',
      '--allow-unauthenticated'
    ]
  id: Deploy

